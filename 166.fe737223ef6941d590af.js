(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{o1NI:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=(t("OO+k"),t("5jpx")),o=t("2EXo"),i=t("nQml"),r=t("9WsB"),a=function(n,l,t,e){return new(t||(t=Promise))(function(u,o){function i(n){try{a(e.next(n))}catch(n){o(n)}}function r(n){try{a(e.throw(n))}catch(n){o(n)}}function a(n){n.done?u(n.value):new t(function(l){l(n.value)}).then(i,r)}a((e=e.apply(n,l||[])).next())})},s=function(n,l){var t,e,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,e&&(u=2&o[0]?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,e=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(u=(u=i.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1],u=o;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(o);break}u[2]&&i.ops.pop(),i.trys.pop();continue}o=l.call(n,i)}catch(n){o=[6,n],e=0}finally{t=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},c=function(){function n(n,l,t,e,u,o,i,r,a,s,c,d){this.modalController=n,this.dataService=l,this.router=t,this.platform=e,this.popoverController=u,this.events=o,this.alertController=i,this.ngZone=r,this.toastController=a,this.storage=s,this.http=c,this.loadingCtrl=d,this.snapshots=[],this.squadrons=[],this.data_progress=0,this.data_message="X-Wing Tabled",this.retry_button=!1,this.retry_button_disabled=!1,this.data_button=!1,this.data_button_disabled=!1,this.image_button=!1,this.image_button_disabled=!1}return n.prototype.ngOnInit=function(){var n=this;this.events.subscribe(this.dataService.topic,function(l){n.data_event_handler(l)}),this.events.subscribe("snapshot",function(l){n.snapshot()})},n.prototype.restoreFromDisk=function(){return a(this,void 0,void 0,function(){var n,l=this;return s(this,function(t){switch(t.label){case 0:return[4,this.storage.ready()];case 1:return t.sent(),[4,this.storage.get("snapshots")];case 2:return n=t.sent(),this.ngZone.run(function(){if(n){l.snapshots=n;var t=JSON.parse(JSON.stringify(l.snapshots[l.snapshots.length-1]));l.squadrons=t.squadrons,console.log(l.squadrons),l.toastUndo(t.time),l.squadrons&&0==l.squadrons.length&&l.presentXwsModal()}else l.presentXwsModal()}),[2]}})})},n.prototype.snapshot=function(){this.snapshots.length>=5&&this.snapshots.shift(),this.snapshots.push({time:(new Date).toISOString(),squadrons:JSON.parse(JSON.stringify(this.squadrons))}),this.storage.set("snapshots",this.snapshots),console.log("snapshot created",this.snapshots)},n.prototype.data_event_handler=function(n){return a(this,void 0,void 0,function(){var l=this;return s(this,function(t){switch(t.label){case 0:return this.data_message=n.message,this.data_progress=n.progress,"manifest_incomplete"==n.status&&(this.data_button=!0,this.data_message="X-Wing Tabled requires a local data update"),"data_download_errors"==n.status&&(this.data_button=!0,this.data_message="Some X-Wing data could not be downloaded"),"no_data_no_connection"!=n.status?[3,3]:(this.retry_button=!0,this.retry_button_disabled=!1,[4,this.alertController.create({header:"Internet Connection Required",message:"An Internet connection is required to update or download necessary data files the first time X-Wing Tabled runs.",buttons:[{text:"Retry",handler:function(){l.ngZone.run(function(){return a(l,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.alertController.dismiss()];case 1:return n.sent(),this.retryDownload(),[2]}})})})}}]})]);case 1:return[4,t.sent().present()];case 2:return[2,t.sent()];case 3:return"loading_images"!=n.status?[3,6]:[4,this.loadingCtrl.create({message:"Loading artwork"})];case 4:return[4,t.sent().present()];case 5:t.sent(),this.events.publish("mainpage",{message:"loading_controller_present"}),t.label=6;case 6:if("loading_images_complete"!=n.status)return[3,10];t.label=7;case 7:return t.trys.push([7,9,,10]),[4,this.loadingCtrl.dismiss()];case 8:case 9:return t.sent(),[3,10];case 10:return"manifest_current"!=n.status&&"data_download_complete"!=n.status||(this.data_button=!1),"images_missing"==n.status&&(this.data_message="X-Wing Tabled needs to download some artwork",this.image_button=!0),"images_complete"==n.status&&(this.image_button=!1,this.restoreFromDisk()),"image_download_incomplete"==n.status&&(this.image_button=!0),"image_download_complete"==n.status&&this.restoreFromDisk(),[2]}})})},n.prototype.retryDownload=function(){this.retry_button_disabled=!0,this.retry_button=!1,this.dataService.check_manifest()},n.prototype.downloadData=function(){this.data_button_disabled=!0,this.dataService.download_data()},n.prototype.downloadArtwork=function(){this.image_button_disabled=!0,this.dataService.download_missing_images(this.dataService.data)},n.prototype.presentDamageDeckActionsPopover=function(n,l){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.popoverController.create({component:i.a,componentProps:{squadron:l},event:n})];case 1:return[4,t.sent().present()];case 2:return[2,t.sent()]}})})},n.prototype.squadronCss=function(){return this.platform.isPortrait()?"squadron-fullwidth":this.squadrons.length>1?"squadron-halfwidth":"squadron-fullwidth"},n.prototype.pilotCss=function(){return this.platform.isPortrait()?"pilot-fullwidth":"pilot-minwidth"},n.prototype.removeSquadron=function(n){return a(this,void 0,void 0,function(){var l=this;return s(this,function(t){switch(t.label){case 0:return[4,this.alertController.create({header:"Remove squadron?",message:"You are about to remove "+n.name,buttons:[{text:"OK",handler:function(){l.ngZone.run(function(){var t=l.squadrons.indexOf(n);l.squadrons.splice(t,1),l.events.publish("snapshot","create snapshot")})}},{text:"Cancel",role:"cancel",cssClass:"secondary"}]})];case 1:return[4,t.sent().present()];case 2:return[2,t.sent()]}})})},n.prototype.resetData=function(n){return a(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Clear data cache?",message:"You are about to reset your data cache. You may have to re-download some data.",buttons:[{text:"OK",handler:function(){n.ngZone.run(function(){n.squadrons=[],n.snapshots=[],n.data_progress=0,n.data_message="X-Wing Tabled",n.data_button=!1,n.data_button_disabled=!1,n.image_button=!1,n.image_button_disabled=!1,n.dataService.reset()})}},{text:"Cancel",role:"cancel",cssClass:"secondary"}]})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n.prototype.askRechargeRecurring=function(){return a(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Recharge Recurring",message:'Do you wish to recover all recurring <i class="xwing-miniatures-font xwing-miniatures-font-charge"></i> and <i class="xwing-miniatures-font xwing-miniatures-font-forcecharge"></i>?',buttons:[{text:"OK",handler:function(){n.ngZone.run(function(){n.rechargeAllRecurring()})}},{text:"Cancel",role:"cancel",cssClass:"secondary"}]})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n.prototype.toastUndo=function(n){return a(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:return[4,this.toastController.create({message:"Table restored to "+n,duration:2e3,position:"bottom"})];case 1:return l.sent().present(),[2]}})})},n.prototype.askUndo=function(){return a(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Rewind Time?",message:"This will rewind time to "+this.snapshots[this.snapshots.length-2].time,buttons:[{text:"OK",handler:function(){n.ngZone.run(function(){n.snapshots.pop();var l=n.snapshots.pop();n.squadrons=l.squadrons,n.events.publish("snapshot","create snapshot"),n.toastUndo(l.time)})}},{text:"Cancel",role:"cancel",cssClass:"secondary"}]})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n.prototype.resetSquadrons=function(){return a(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return this.squadrons.forEach(function(l){l.pointsDestroyed=0,l.damagediscard=[],l.damagedeck=n.dataService.getDamageDeck(),n.shuffleDamageDeck(l),l.pilots.forEach(function(n){n.damagecards=[],n.conditions=[],n.pointsDestroyed=0,n.stats.forEach(function(n){n.remaining=n.value}),n.upgrades.forEach(function(n){n.side=0,n.sides[0].charges&&(n.sides[0].charges.remaining=n.sides[0].charges.value)})})}),this.events.publish("snapshot","create snapshot"),[4,this.toastController.create({message:"Squadrons reset",duration:2e3,position:"bottom"})];case 1:return l.sent().present(),[2]}})})},n.prototype.askReset=function(){return a(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Reset all squadrons?",message:"All charges, force and shields will be restored, damage cards shuffled and conditions removed.",buttons:[{text:"OK",handler:function(){n.ngZone.run(function(){n.resetSquadrons()})}},{text:"Cancel",role:"cancel",cssClass:"secondary"}]})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n.prototype.rechargeAllRecurring=function(){var n=function(n){n.remaining+=n.recovers,n.remaining>n.value&&(n.remaining=n.value)};this.squadrons.forEach(function(l){l.pilots.forEach(function(l){for(var t=0;t<l.stats.length;t++){var e=l.stats[t];e.recovers&&(n(e),l.stats.splice(t,1,JSON.parse(JSON.stringify(e))))}l.upgrades.forEach(function(l){var t=l.sides[0];t.charges&&t.charges.recovers&&(n(t.charges),t.charges=JSON.parse(JSON.stringify(t.charges)))})})}),this.events.publish("snapshot","create snapshot")},n.prototype.toastNotFound=function(n,l){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.toastController.create({message:"WARNING: The "+l+" "+n+" could not be found. Try nuking your local data and downloading the latest XWS Data.",duration:5e3,position:"bottom"})];case 1:return t.sent().present(),[2]}})})},n.prototype.injectShipData=function(n,l){n.ship=this.dataService.getShip(l,n.ship),null!=n.ship?(n.stats=[],n.ship.stats.forEach(function(l){var t=JSON.parse(JSON.stringify(l));t.remaining=l.value,l.recovers&&(t.numbers=new Array(l.recovers)),n.stats.push(t)})):this.toastNotFound(n.ship,"ship")},n.prototype.injectPilotData=function(n,l){if(n.pilot=this.dataService.getPilot(l,n.ship.keyname,n.id),null!=n.pilot){var t=function(l,t){var e=JSON.parse(JSON.stringify(l));e.type=t,e.remaining=l.value,e.numbers=Array(l.numbers),n.stats.push(e)};n.pilot.charges&&t(n.pilot.charges,"charges"),n.pilot.force&&t(n.pilot.force,"force"),n.card_text="",n.pilot.ability&&(n.card_text+=n.pilot.ability+"<br /><br />"),n.pilot.text&&(n.card_text+=n.pilot.text+"<br /><br />"),n.pilot.shipAbility&&n.pilot.shipAbility.text&&(n.card_text+="<i>"+n.pilot.shipAbility.name+"</i>: "+n.pilot.shipAbility.text),n.damagecards=[],n.conditions=[],n.pointsDestroyed=0}else this.toastNotFound(n.id,"pilot")},n.prototype.mangleUpgradeArray=function(n){var l=this,t=[];n.upgrades&&Object.entries(n.upgrades).forEach(function(n){var e=n[0],u=n[1];Array.isArray(u)&&u.forEach(function(n){"force"==e&&(e="forcepower");var u=l.dataService.getUpgrade(e,n);null!=u?(u.type=e,t.push(u)):l.toastNotFound(n,"upgrade")})}),n.upgrades=t},n.prototype.injectUpgradeData=function(n,l){l.side=0,l.sides.forEach(function(n){n.charges&&(n.charges.type="charges",n.charges.remaining=n.charges.value,n.charges.numbers=Array(n.charges.recovers)),n.force&&(n.force.numbers=Array(n.force.recovers),n.force.type="force"),n.attack&&(n.attack.type="attack",n.attack.icon=n.attack.arc)})},n.prototype.injectShipBonuses=function(n){n.upgrades.forEach(function(l){var t=l.sides[0];if(t.grants){var e=t.grants.find(function(n){return"shields"==n.value||"hull"==n.value});if(e){var u=n.stats.find(function(n){return n.type==e.value});u.value+=e.amount,u.remaining=u.value}}})},n.prototype.injectForceBonuses=function(n){n.upgrades.forEach(function(l){var t=l.sides[0];if(t.force){var e=n.stats.find(function(n){return"force"==n.type});e||n.stats.push(e={value:0,recovers:0,type:"force",numbers:[]}),e.value+=t.force.value,e.recovers+=t.force.recovers,e.numbers=Array(e.recovers),e.remaining=e.value}})},n.prototype.calculatePoints=function(n){var l=n.pilot.cost,t=0;n.upgrades.forEach(function(l){var e;l.cost&&("value"in l.cost&&(t+=l.cost.value),"variable"in l.cost)&&(e="size"==l.cost.variable?n.ship.size:n.stats.find(function(n){return n.type==l.cost.variable}).value,t+=l.cost.values[e])}),n.points=l+t},n.prototype.shuffleDamageDeck=function(n){for(var l=[];n.damagedeck.length>0;){var t=Math.floor(Math.random()*Math.floor(n.damagedeck.length)),e=n.damagedeck[t];n.damagedeck.splice(t,1),l.push(e)}n.damagedeck=l},n.prototype.xwsAddButton=function(){this.presentXwsModal()},n.prototype.processFFG=function(n){return a(this,void 0,void 0,function(){var l=this;return s(this,function(t){return this.http.get("https://squadbuilder.fantasyflightgames.com/api/squads/"+n+"/").subscribe(function(n){var t=[];n.deck.forEach(function(n){var e=l.dataService.getXwsFromFFG(n.pilot_card.id);e.points=n.cost;var u={};n.slots.forEach(function(n){var t=l.dataService.getXwsFromFFG(n.id);void 0==u[t.type]&&(u[t.type]=[]),u[t.type].push(t.xws)}),e.upgrades=u,t.push(e)});var e={description:n.description,faction:n.faction.name.replace(/ /g,"").toLowerCase(),name:n.name,points:n.cost,pilots:t};console.log("FFG SquadBuilder response",n),console.log("FFG -> XWS",e),l.processXws(e)},function(n){console.log("Unable to get FFG SquadBuilder data",n)}),[2]})})},n.prototype.processYasb=function(n){return a(this,void 0,void 0,function(){var l,t,e=this;return s(this,function(u){switch(u.label){case 0:return l=[],n.pilots.forEach(function(n){var t=e.dataService.getYasbPilot(n.id),u={id:t.xws,ship:t.ship,upgrades:{}},o={};n.upgrades.forEach(function(n){var l=e.dataService.getYasbUpgrade(parseInt(n));void 0==o[l.slot]&&(o[l.slot]=[]),o[l.slot].push(l.xws)}),u.upgrades=o,l.push(u)}),t={name:n.name,faction:n.faction,pilots:l},console.log("YASB squadron",t),[4,this.processXws(t)];case 1:return[2,u.sent()]}})})},n.prototype.processXws=function(n){return a(this,void 0,void 0,function(){var l=this;return s(this,function(t){switch(t.label){case 0:return this.ngZone.run(function(){var t=0;n.damagediscard=[],n.damagedeck=l.dataService.getDamageDeck(),n.pilots.forEach(function(e){l.injectShipData(e,n.faction),l.injectPilotData(e,n.faction),l.mangleUpgradeArray(e),e.upgrades.forEach(function(n){l.injectUpgradeData(e,n)}),l.calculatePoints(e),t+=e.points,l.injectShipBonuses(e),l.injectForceBonuses(e)}),n.points=t,n.pointsDestroyed=0,l.shuffleDamageDeck(n),console.log("xws loaded and data injected",n),l.squadrons=[n],l.events.publish("snapshot","Squadron "+n.name+" added")}),[4,this.toastController.create({message:"Squadron added, Damage Deck shuffled",duration:2e3,position:"bottom"})];case 1:return[4,t.sent().present()];case 2:return[2,t.sent()]}})})},n.prototype.presentXwsModal=function(){return a(this,void 0,void 0,function(){var n,l;return s(this,function(t){switch(t.label){case 0:return[4,this.modalController.create({component:u.a})];case 1:return[4,(n=t.sent()).present()];case 2:return t.sent(),[4,n.onWillDismiss()];case 3:return(l=t.sent().data)?l.ffg?[2,this.processFFG(l.ffg)]:l.yasb?[2,this.processYasb(l.yasb)]:l.xws?[2,this.processXws(l.xws)]:[2]:[2]}})})},n}(),d=function(){},p=t("pMnS"),b=t("ra/t"),g=t("ntG5"),f=t("M9A9"),h=t("ZYCi"),m=t("Ip0R"),v=t("mrSG"),y=function(){function n(){this.color="#488aff"}return n.prototype.whichColor=function(n){var l=Object.keys(this.degraded);l.forEach(function(n,t){return l[t]=+n});var t,e,u=+n,o=(l=l.sort(function(n,l){return n-l}))[0];try{for(var i=Object(v.h)(l),r=i.next();!r.done;r=i.next()){var a=r.value;if(a<u)o=a;else if(a>=u-1)return this.degraded[o]}}catch(n){t={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return this.degraded[o]},n.prototype.whichProgress=function(n){try{return Math.round(100*+n)/100}catch(l){return n}},n}(),w=function(){},_=e.pb({encapsulation:0,styles:[".progress-outer[_ngcontent-%COMP%] {\n        width: 96%;\n        margin: 10px 2%;\n        padding: 3px;\n        background-color: #f4f4f4;\n        border: 1px solid #dcdcdc;\n        color: #fff;\n        border-radius: 20px;\n        text-align: center;\n      }\n      .progress-inner[_ngcontent-%COMP%] {\n        min-width: 15%;\n        white-space: nowrap;\n        overflow: hidden;\n        padding: 0px;\n        border-radius: 20px;"],data:{}});function k(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","progress-outer"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"div",[["class","progress-inner"]],[[4,"width",null],[4,"background-color",null]],null,null,null,null)),(n()(),e.Eb(2,null,[" ","%\n"]))],null,function(n,l){var t=l.component;n(l,1,0,t.whichProgress(t.progress)+"%",null==t.degraded?t.color:t.whichColor(t.progress)),n(l,2,0,t.whichProgress(t.progress))})}var q=t("kJ0a"),x=t("OOx7"),O=t("hKKh"),C=t("RHCf"),P=function(){function n(){this.css_class="difficulty-white"}return n.prototype.ngOnInit=function(){this.css_class="difficulty-"+this.action.difficulty.toLowerCase()},n}(),M=e.pb({encapsulation:0,styles:[[".difficulty-white[_ngcontent-%COMP%]{color:#fff}.difficulty-red[_ngcontent-%COMP%]{color:red}.difficulty-purple[_ngcontent-%COMP%]{color:purple}"]],data:{}});function F(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,6,"span",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["\xa0"])),(n()(),e.rb(2,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(3,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(-1,null,["\xa0"])),(n()(),e.rb(5,0,null,null,1,"xws-action",[],null,null,null,N,M)),e.qb(6,114688,null,0,P,[],{action:[0,"action"]},null)],function(n,l){var t=l.component;n(l,3,0,"linked"),n(l,6,0,t.action.linked)},null)}function N(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"span",[["class","action"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[],[[8,"className",0]],null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.ib(16777216,null,null,1,null,F)),e.qb(4,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,t.action.type),n(l,4,0,t.action.linked)},function(n,l){n(l,1,0,l.component.css_class)})}var I=function(){function n(){this.orientation="horizontal",this.bonus=!1}return n.prototype.ngOnInit=function(){"attack"==this.stat.type&&(this.stat.icon=this.stat.arc)},n}(),S=e.pb({encapsulation:0,styles:[[".agility[_ngcontent-%COMP%], .attack[_ngcontent-%COMP%], .charges[_ngcontent-%COMP%], .force[_ngcontent-%COMP%], .hull[_ngcontent-%COMP%], .shields[_ngcontent-%COMP%], .stats[_ngcontent-%COMP%]{padding-left:.2vw;padding-right:.2vw;display:inline-block}.vertical[_ngcontent-%COMP%]{display:block;width:1.5em;text-align:center;font-size:2vh}.horizontal[_ngcontent-%COMP%]{display:inline-block;padding-left:.1vw;padding-right:.1vw}.underline[_ngcontent-%COMP%]{text-decoration:underline}.agility[_ngcontent-%COMP%]{color:green}.attack[_ngcontent-%COMP%]{color:red}.charges[_ngcontent-%COMP%], .hull[_ngcontent-%COMP%]{color:#ff0}.force[_ngcontent-%COMP%]{color:#8a2be2}.shields[_ngcontent-%COMP%]{color:#add8e6}.attack-range[_ngcontent-%COMP%]{color:#fff}"]],data:{}});function E(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Eb(1,null,["+",""]))],null,function(n,l){n(l,1,0,l.component.stat.value)})}function D(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Eb(1,null,[" "," "]))],null,function(n,l){n(l,1,0,l.component.stat.value)})}function z(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(n()(),e.Eb(2,null,["",""]))],null,function(n,l){var t=l.component;n(l,1,0,t.stat.remaining!=t.stat.value?"underline":""),n(l,2,0,t.stat.remaining)})}function Q(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(1,114688,null,0,x.a,[],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"recurring")},null)}function A(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,Q)),e.qb(2,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.stat.numbers)},null)}function B(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(1,114688,null,0,x.a,[],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"rangebonusindicator")},null)}function $(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,B)),e.qb(2,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(3,0,null,null,1,"span",[["class","attack-range"]],null,null,null,null,null)),(n()(),e.Eb(4,null,["","-",""]))],function(n,l){n(l,2,0,l.component.stat.ordnance)},function(n,l){var t=l.component;n(l,0,0,t.orientation),n(l,4,0,t.stat.minrange,t.stat.maxrange)})}function j(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,14,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),e.rb(2,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(3,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.rb(4,0,null,null,8,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,E)),e.qb(6,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,D)),e.qb(8,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,z)),e.qb(10,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,A)),e.qb(12,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,$)),e.qb(14,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,t.stat.icon?t.stat.icon:t.stat.type),n(l,6,0,t.bonus),n(l,8,0,"attack"==t.stat.type),n(l,10,0,!t.bonus&&"attack"!=t.stat.type),n(l,12,0,t.stat.recovers),n(l,14,0,t.stat.minrange)},function(n,l){var t=l.component;n(l,0,0,t.stat.type),n(l,1,0,t.orientation),n(l,4,0,t.orientation)})}var J=function(){function n(){this.grant={}}return n.prototype.ngOnInit=function(){},n}(),R=e.pb({encapsulation:0,styles:[[".modal-content[_ngcontent-%COMP%]{background-color:#212020;min-height:100%;padding:1vw}.bonus-text[_ngcontent-%COMP%]{padding-left:.2vw}.grant-shield[_ngcontent-%COMP%]{color:#add8e6}.grant-hull[_ngcontent-%COMP%]{color:#ff0}.grant-icon[_ngcontent-%COMP%]{font-weight:100}"]],data:{}});function X(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"span",[["class","grant-shield"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[["class","grant-icon"]],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.rb(3,0,null,null,1,"span",[["class","bonus-text"]],null,null,null,null,null)),(n()(),e.Eb(4,null,["+",""]))],function(n,l){n(l,2,0,"shield")},function(n,l){n(l,4,0,l.component.grant.amount)})}function T(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"span",[["class","grant-hull"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[["class","grant-icon"]],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.rb(3,0,null,null,1,"span",[["class","bonus-text"]],null,null,null,null,null)),(n()(),e.Eb(4,null,["+",""]))],function(n,l){n(l,2,0,"hull")},function(n,l){n(l,4,0,l.component.grant.amount)})}function U(n){return e.Fb(0,[(n()(),e.ib(16777216,null,null,1,null,X)),e.qb(1,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,T)),e.qb(3,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0,"stat"==t.grant.type&&"shields"==t.grant.value),n(l,3,0,"stat"==t.grant.type&&"hull"==t.grant.value)},null)}var G=t("lZ+q"),W=function(){function n(n,l,t){this.dataService=n,this.modalController=l,this.events=t,this.upgrade={},this.img_class="img-box",this.img_urls=["",""]}return n.prototype.presentUpgradeModal=function(){return n=this,void 0,t=function(){var n,l;return function(n,l){var t,e,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,e&&(u=2&o[0]?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,e=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(u=(u=i.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1],u=o;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(o);break}u[2]&&i.ops.pop(),i.trys.pop();continue}o=l.call(n,i)}catch(n){o=[6,n],e=0}finally{t=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}}(this,function(t){switch(t.label){case 0:return n=JSON.stringify(this.upgrade),[4,this.modalController.create({component:G.a,componentProps:{upgrade:this.upgrade}})];case 1:return[4,(l=t.sent()).present()];case 2:return t.sent(),[4,l.onWillDismiss()];case 3:return t.sent(),n!=JSON.stringify(this.upgrade)&&this.events.publish("snapshot","create snapshot"),[2]}})},new((l=void 0)||(l=Promise))(function(e,u){function o(n){try{r(t.next(n))}catch(n){u(n)}}function i(n){try{r(t.throw(n))}catch(n){u(n)}}function r(n){n.done?e(n.value):new l(function(l){l(n.value)}).then(o,i)}r((t=t.apply(n,[])).next())});var n,l,t},n.prototype.ngOnInit=function(){var n=this;"configuration"==this.upgrade.type&&(this.img_class="img-config-box");for(var l=function(l){t.dataService.get_image_by_url(t.upgrade.sides[l].artwork).then(function(t){n.img_urls[l]=t})},t=this,e=0;e<this.upgrade.sides.length;e++)l(e)},n.prototype.showUpgrade=function(){this.presentUpgradeModal()},n}(),Y=t("9opb"),Z=t("Da8k"),K=e.pb({encapsulation:0,styles:[[".modal-content[_ngcontent-%COMP%]{background-color:#212020;min-height:100%;padding:1vw}.upgrade[_ngcontent-%COMP%]{font-size:1.5vh;background:#212020;color:#fff;margin-right:.2vh;margin-bottom:.2vh}.upgrade-img-container[_ngcontent-%COMP%]{display:block}.upgrade-img[_ngcontent-%COMP%]{height:10vh}.upgrade-name[_ngcontent-%COMP%]{width:100%;text-align:center;vertical-align:center;padding-top:.25vh;padding-bottom:.25vh}.upgrade-info-block[_ngcontent-%COMP%]{position:relative;bottom:0;box-sizing:border-box;height:3vh;padding-top:.5vh;padding-bottom:.5vh;padding-right:.5vw;width:100%;display:flex;flex-direction:row;justify-content:flex-end;font-size:2vh}.upgrade-info-block-left[_ngcontent-%COMP%], .upgrade-info-block-right[_ngcontent-%COMP%]{display:inline-block}.upgrade-filler[_ngcontent-%COMP%]{font-size:1.5em}.action-box[_ngcontent-%COMP%]{border-left:1px solid #d3d3d3;padding-left:.4em;padding-right:.2em}"]],data:{}});function L(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-stat",[],null,null,null,j,S)),e.qb(1,114688,null,0,I,[],{stat:[0,"stat"]},null)],function(n,l){var t=l.component;n(l,1,0,t.upgrade.sides[t.upgrade.side].attack)},null)}function H(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-action",[["class","action-box"]],null,null,null,N,M)),e.qb(1,114688,null,0,P,[],{action:[0,"action"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},null)}function V(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-stat",[],null,null,null,j,S)),e.qb(1,114688,null,0,I,[],{stat:[0,"stat"]},null)],function(n,l){var t=l.component;n(l,1,0,t.upgrade.sides[t.upgrade.side].charges)},null)}function nn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-stat",[],null,null,null,j,S)),e.qb(1,114688,null,0,I,[],{stat:[0,"stat"],bonus:[1,"bonus"]},null)],function(n,l){var t=l.component;n(l,1,0,t.upgrade.sides[t.upgrade.side].force,!0)},null)}function ln(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(1,114688,null,0,x.a,[],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"config")},null)}function tn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-bonus-stats",[],null,null,null,U,R)),e.qb(1,114688,null,0,J,[],{grant:[0,"grant"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},null)}function en(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,19,"div",[["class","upgrade"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showUpgrade()&&e),e},null,null)),(n()(),e.rb(1,0,null,null,1,"div",[["class","upgrade-img-container"]],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,0,"img",[["class","upgrade-img"]],[[8,"src",4]],null,null,null,null)),(n()(),e.rb(3,0,null,null,1,"div",[["class","upgrade-name"]],null,null,null,null,null)),(n()(),e.Eb(4,null,[" "," "])),(n()(),e.rb(5,0,null,null,14,"div",[["class","upgrade-info-block"]],null,null,null,null,null)),(n()(),e.rb(6,0,null,null,4,"div",[["class","upgrade-info-block-left"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,L)),e.qb(8,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,H)),e.qb(10,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(11,0,null,null,8,"div",[["class","upgrade-info-block-right"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,V)),e.qb(13,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,nn)),e.qb(15,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,ln)),e.qb(17,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,tn)),e.qb(19,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var t=l.component;n(l,8,0,t.upgrade.sides[t.upgrade.side].attack),n(l,10,0,t.upgrade.sides[t.upgrade.side].actions),n(l,13,0,t.upgrade.sides[t.upgrade.side].charges),n(l,15,0,t.upgrade.sides[t.upgrade.side].force),n(l,17,0,"configuration"==t.upgrade.type),n(l,19,0,t.upgrade.sides[t.upgrade.side].grants)},function(n,l){var t=l.component;n(l,2,0,t.img_urls[t.upgrade.side]),n(l,4,0,t.upgrade.name)})}var un=function(){function n(){this.name="",this.icon_class=""}return n.getClass=function(l){return n.icon_class_template.replace("TEMPLATE",l)},n.prototype.ngOnInit=function(){this.icon_class=n.getClass(this.name)},n.icon_class_template="xwing-miniatures-ship xwing-miniatures-ship-TEMPLATE",n}(),on=e.pb({encapsulation:0,styles:[[""]],data:{}});function rn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,0,"i",[],[[8,"className",0]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.icon_class)})}var an=t("S0Yn"),sn=function(){function n(n,l,t,e){this.dataService=n,this.modalController=l,this.platform=t,this.events=e,this.columns=[],this.img_url=null}return n.prototype.getStatString=function(n){return this.pilot.ship.stats.forEach(function(l){if(l.type==n)return l.value!=l.remaining?"("+l.remaining+")":l.value}),""},n.prototype.ngOnInit=function(){var n=this,l=[];this.pilot.upgrades.forEach(function(t){l.push(t),2==l.length&&(n.columns.push(l),l=[])}),l.length>0&&this.columns.push(l);var t=this.pilot.pilot.artwork;t||(t=this.pilot.pilot.image),t&&this.dataService.get_image_by_url(t).then(function(l){n.img_url=l})},n.prototype.presentPilotModal=function(){return n=this,void 0,t=function(){var n,l;return function(n,l){var t,e,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,e&&(u=2&o[0]?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,e=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(u=(u=i.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1],u=o;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(o);break}u[2]&&i.ops.pop(),i.trys.pop();continue}o=l.call(n,i)}catch(n){o=[6,n],e=0}finally{t=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}}(this,function(t){switch(t.label){case 0:return n=JSON.stringify(this.pilot),[4,this.modalController.create({component:an.a,componentProps:{pilot:this.pilot,squadron:this.squadron}})];case 1:return[4,(l=t.sent()).present()];case 2:return t.sent(),[4,l.onWillDismiss()];case 3:return t.sent(),n!=JSON.stringify(this.pilot)&&this.events.publish("snapshot","create snapshot"),[2]}})},new((l=void 0)||(l=Promise))(function(e,u){function o(n){try{r(t.next(n))}catch(n){u(n)}}function i(n){try{r(t.throw(n))}catch(n){u(n)}}function r(n){n.done?e(n.value):new l(function(l){l(n.value)}).then(o,i)}r((t=t.apply(n,[])).next())});var n,l,t},n.prototype.showPilot=function(){this.presentPilotModal()},n}(),cn=t("YxxD"),dn=e.pb({encapsulation:0,styles:[[".modal-content[_ngcontent-%COMP%]{background-color:#212020;min-height:100%;padding:1vw}.pilot[_ngcontent-%COMP%]{margin-top:.2vh;margin-right:.2vw;background:#282828;color:#fff;position:relative}.pilot-header[_ngcontent-%COMP%]{padding-top:.5vh;padding-bottom:.5vh;font-size:2vh}.pilot-initiative[_ngcontent-%COMP%]{color:orange;font-weight:900;margin-right:.5em}.pilot-destroyed-overlay[_ngcontent-%COMP%]{width:100%;height:44vh;position:absolute;background-color:#ff000044;left:0;top:0;right:0;bottom:0;z-index:10}.card-text[_ngcontent-%COMP%]{font-size:1.5vh;color:#fff;padding-left:.5vh}.upgrade-column[_ngcontent-%COMP%], .upgrade-container[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.upgrade[_ngcontent-%COMP%], .upgrade-portrait[_ngcontent-%COMP%]{display:block}.pilot-card[_ngcontent-%COMP%]{width:24vh;height:40vh;display:inline-block;vertical-align:top;overflow-y:scroll}.pilot-card[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 .2vh #282828;border-radius:.2vh;background-color:#282828}.pilot-card[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5vh;background-color:#282828}.pilot-card[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:.2vh;-webkit-box-shadow:inset 0 0 .2vh rgba(0,0,0,.3);background-color:#555}.action[_ngcontent-%COMP%]{padding-left:.3em;padding-right:.3em}.action-bar[_ngcontent-%COMP%]{text-align:center;font-size:2vh;max-width:100%;overflow:wrap;padding:.5vh 1em}.stat[_ngcontent-%COMP%]{display:inline-block}.stat-block[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin-bottom:.5vh}.ship-fw[_ngcontent-%COMP%]{display:inline-block;text-align:center;width:3vw;font-size:2vw}.ship-status[_ngcontent-%COMP%], .ship-status-portrait[_ngcontent-%COMP%]{background:#212020;font-size:2vw;min-height:2.25vw;height:2.25vw;padding-left:.5vw}.ship-status-portrait[_ngcontent-%COMP%]{font-size:4vw}.image-container[_ngcontent-%COMP%]{display:inline-block;max-width:24vh;max-height:10vh;overflow:hidden}.image-constrained[_ngcontent-%COMP%]{-webkit-clip-path:polygon(0 0,100% 0,100% 30%,0 30%);clip-path:polygon(0 0,100% 0,100% 30%,0 30%)}.item-pilotart[_ngcontent-%COMP%]{vertical-align:top;height:10vh}.item-pilotart-portrait[_ngcontent-%COMP%]{display:block;width:100%}.item-status[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.damage-cards[_ngcontent-%COMP%]{font-size:1.5vh;padding-left:.5em}.damage-facedown[_ngcontent-%COMP%]{color:red}.conditions[_ngcontent-%COMP%]{font-size:1.5vh;padding-left:.5em}"]],data:{}});function pn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(3,null,[" ",""]))],function(n,l){n(l,2,0,"token-lock")},function(n,l){n(l,3,0,l.component.pilot.idNumber)})}function bn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,0,"img",[],[[8,"src",4],[8,"className",0]],null,null,null,null))],null,function(n,l){var t=l.component;n(l,0,0,t.img_url,t.platform.isPortrait()?"item-pilotart-portrait":"item-pilotart")})}function gn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,0,"img",[["class","image-constrained"]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,l.component.img_url)})}function fn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","card-text"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-text",[],null,null,null,O.b,O.a)),e.qb(2,114688,null,0,C.a,[],{text:[0,"text"]},null)],function(n,l){n(l,2,0,l.component.pilot.card_text)},null)}function hn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"div",[["class","image-container"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,gn)),e.qb(2,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,fn)),e.qb(4,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,t.img_url),n(l,4,0,!t.img_url)},null)}function mn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-action",[["class","action"]],null,null,null,N,M)),e.qb(1,114688,null,0,P,[],{action:[0,"action"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},null)}function vn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-stat",[],null,null,null,j,S)),e.qb(1,114688,null,0,I,[],{stat:[0,"stat"],orientation:[1,"orientation"]},null)],function(n,l){n(l,1,0,l.context.$implicit,"vertical")},null)}function yn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(3,null,[""," "]))],function(n,l){n(l,2,0,"condition")},function(n,l){n(l,3,0,l.context.$implicit.name)})}function wn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[["class","damage-facedown"]],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(3,null,["",""]))],function(n,l){n(l,2,0,"crit")},function(n,l){n(l,3,0,l.parent.context.$implicit.title)})}function _n(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"div",[["class","damage-facedown"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(2,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(-1,null,["Damage Card"]))],function(n,l){n(l,2,0,"hit")},null)}function kn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,wn)),e.qb(2,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,_n)),e.qb(4,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.context.$implicit.exposed),n(l,4,0,!l.context.$implicit.exposed)},null)}function qn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-upgrade",[],[[8,"className",0]],null,null,en,K)),e.qb(1,114688,null,0,W,[o.a,Y.a,Z.a],{upgrade:[0,"upgrade"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},function(n,l){n(l,0,0,l.component.platform.isPortrait()?"upgrade-portrait":"upgrade")})}function xn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","upgrade-column"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,qn)),e.qb(2,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.context.$implicit)},null)}function On(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,0,"div",[["class","pilot-destroyed-overlay"]],null,null,null,null,null))],null,null)}function Cn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,31,"div",[["class","pilot"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,8,"div",[["class","pilot-header"]],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,1,"xwing-ship",[["class","ship-fw"]],null,null,null,rn,on)),e.qb(3,114688,null,0,un,[],{name:[0,"name"]},null),(n()(),e.rb(4,0,null,null,1,"span",[["class","pilot-initiative"]],null,null,null,null,null)),(n()(),e.Eb(5,null,["",""])),(n()(),e.Eb(6,null,[" ","\xa0 "])),(n()(),e.ib(16777216,null,null,1,null,pn)),e.qb(8,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.Eb(9,null,["\xa0 ( "," / "," ) "])),(n()(),e.rb(10,0,null,null,16,"div",[["class","pilot-card"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showPilot()&&e),e},null,null)),(n()(),e.ib(16777216,null,null,1,null,bn)),e.qb(12,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,1,null,hn)),e.qb(14,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(15,0,null,null,2,"div",[["class","action-bar"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,mn)),e.qb(17,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(18,0,null,null,2,"div",[["class","stat-block"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,vn)),e.qb(20,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(21,0,null,null,2,"div",[["class","conditions"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,yn)),e.qb(23,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(24,0,null,null,2,"div",[["class","damage-cards"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,kn)),e.qb(26,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(27,0,null,null,2,"div",[["class","upgrade-container"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,xn)),e.qb(29,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.ib(16777216,null,null,1,null,On)),e.qb(31,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,t.pilot.ship.keyname),n(l,8,0,t.pilot.idNumber&&t.pilot.idNumber>0),n(l,12,0,t.pilot.pilot.artwork),n(l,14,0,!t.pilot.pilot.artwork),n(l,17,0,t.pilot.ship.actions),n(l,20,0,t.pilot.stats),n(l,23,0,t.pilot.conditions),n(l,26,0,t.pilot.damagecards),n(l,29,0,t.columns),n(l,31,0,t.pilot.points==t.pilot.pointsDestroyed)},function(n,l){var t=l.component;n(l,5,0,t.pilot.pilot.initiative),n(l,6,0,t.pilot.pilot.name),n(l,9,0,t.pilot.pointsDestroyed,t.pilot.points)})}var Pn=t("apKv"),Mn=t("CssM"),Fn=t("P87I"),Nn=t("iw74"),In=t("Eq7r"),Sn=e.pb({encapsulation:0,styles:[[".progress-bar-container[_ngcontent-%COMP%], .title-bar[_ngcontent-%COMP%]{display:inline-block;width:50%}.squadron-container[_ngcontent-%COMP%]{display:block}.squadron-item[_ngcontent-%COMP%]{display:inline-block}.squadron-halfwidth[_ngcontent-%COMP%]{display:inline-block;width:50%;vertical-align:top}.squadron-fullwidth[_ngcontent-%COMP%]{width:100%;vertical-align:top}.squadron-header[_ngcontent-%COMP%]{display:block}.squadron-name[_ngcontent-%COMP%]{display:inline-block;padding-left:.5vw}.squadron-info[_ngcontent-%COMP%]{display:inline-block}.damage-deck-summary[_ngcontent-%COMP%]{padding-left:.5vw;padding-right:.5vw}.damage-deck-summary-text[_ngcontent-%COMP%]{line-height:1.5vh;display:inline-block;vertical-align:middle}.damage-deck-icon[_ngcontent-%COMP%]{display:inline-block;text-align:center;width:3vw;font-size:2vw;color:red;background-color:#000;margin-right:.5vw}.pilotlist[_ngcontent-%COMP%]{display:block}.pilot[_ngcontent-%COMP%]{display:inline-block}.pilot-fullwidth[_ngcontent-%COMP%]{display:block;width:100%}.pilot-minwidth[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]],data:{}});function En(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0,o=n.component;return"click"===l&&(u=!1!==e.Bb(n,2).onClick(t)&&u),"click"===l&&(u=!1!==o.retryManifest()&&u),u},b.u,b.b)),e.qb(1,49152,null,0,g.f,[e.i,e.l],{disabled:[0,"disabled"]},null),e.qb(2,16384,null,0,f.a,[[2,h.l],e.l],null,null),(n()(),e.Eb(-1,0,["Retry Download"]))],function(n,l){n(l,1,0,l.component.retry_button_disabled)},null)}function Dn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0,o=n.component;return"click"===l&&(u=!1!==e.Bb(n,2).onClick(t)&&u),"click"===l&&(u=!1!==o.downloadData()&&u),u},b.u,b.b)),e.qb(1,49152,null,0,g.f,[e.i,e.l],{disabled:[0,"disabled"]},null),e.qb(2,16384,null,0,f.a,[[2,h.l],e.l],null,null),(n()(),e.Eb(-1,0,["Download Data"]))],function(n,l){n(l,1,0,l.component.data_button_disabled)},null)}function zn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0,o=n.component;return"click"===l&&(u=!1!==e.Bb(n,2).onClick(t)&&u),"click"===l&&(u=!1!==o.downloadArtwork()&&u),u},b.u,b.b)),e.qb(1,49152,null,0,g.f,[e.i,e.l],{disabled:[0,"disabled"]},null),e.qb(2,16384,null,0,f.a,[[2,h.l],e.l],null,null),(n()(),e.Eb(-1,0,["Download Artwork"]))],function(n,l){n(l,1,0,l.component.image_button_disabled)},null)}function Qn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,17,"ion-header",[],null,null,null,b.A,b.h)),e.qb(1,49152,null,0,g.y,[e.i,e.l],null,null),(n()(),e.rb(2,0,null,0,15,"ion-toolbar",[],null,null,null,b.L,b.r)),e.qb(3,49152,null,0,g.xb,[e.i,e.l],null,null),(n()(),e.rb(4,0,null,0,7,"ion-buttons",[["slot","end"]],null,null,null,b.v,b.c)),e.qb(5,49152,null,0,g.g,[],null,null),(n()(),e.ib(16777216,null,0,1,null,En)),e.qb(7,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,0,1,null,Dn)),e.qb(9,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,0,1,null,zn)),e.qb(11,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(12,0,null,0,2,"ion-title",[["class","title-bar"]],null,null,null,b.K,b.s)),e.qb(13,49152,null,0,g.yb,[e.i,e.l],null,null),(n()(),e.Eb(14,0,["",""])),(n()(),e.rb(15,0,null,0,2,"div",[["class","progress-bar-container"]],null,null,null,null,null)),(n()(),e.rb(16,0,null,null,1,"progress-bar",[],null,null,null,k,_)),e.qb(17,49152,null,0,y,[],{progress:[0,"progress"],color:[1,"color"]},null)],function(n,l){var t=l.component;n(l,7,0,t.retry_button),n(l,9,0,t.data_button),n(l,11,0,t.image_button),n(l,17,0,t.data_progress,"#488aff")},function(n,l){n(l,14,0,l.component.data_message)})}function An(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"xws-pilot",[],[[8,"className",0]],null,null,Cn,dn)),e.qb(1,114688,null,0,sn,[o.a,Y.a,cn.a,Z.a],{squadron:[0,"squadron"],pilot:[1,"pilot"],faction:[2,"faction"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit,l.context.$implicit,l.parent.context.$implicit.faction)},function(n,l){n(l,0,0,l.component.pilotCss())})}function Bn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,24,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),e.rb(1,0,null,null,21,"div",[["class","squadron-header"]],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,20,"ion-toolbar",[],null,null,null,b.L,b.r)),e.qb(3,49152,null,0,g.xb,[e.i,e.l],null,null),(n()(),e.rb(4,0,null,0,3,"span",[["class","squadron-name"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(6,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.Eb(7,null,["\xa0 "," ( "," / "," ) "])),(n()(),e.rb(8,0,null,0,14,"ion-buttons",[["slot","end"]],null,null,null,b.v,b.c)),e.qb(9,49152,null,0,g.g,[],null,null),(n()(),e.rb(10,0,null,0,7,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0,o=n.component;return"click"===l&&(u=!1!==e.Bb(n,12).onClick(t)&&u),"click"===l&&(u=!1!==o.presentDamageDeckActionsPopover(t,n.context.$implicit)&&u),u},b.u,b.b)),e.qb(11,49152,null,0,g.f,[e.i,e.l],null,null),e.qb(12,16384,null,0,f.a,[[2,h.l],e.l],null,null),(n()(),e.rb(13,0,null,0,4,"span",[["class","damage-deck-summary"]],null,null,null,null,null)),(n()(),e.rb(14,0,null,null,1,"xwing-icon",[["class","damage-deck-icon"]],null,null,null,q.b,q.a)),e.qb(15,114688,null,0,x.a,[],{name:[0,"name"]},null),(n()(),e.rb(16,0,null,null,1,"span",[["class","damage-deck-summary-text"]],null,null,null,null,null)),(n()(),e.Eb(17,null,["",""])),(n()(),e.rb(18,0,null,0,4,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0,o=n.component;return"click"===l&&(u=!1!==e.Bb(n,20).onClick(t)&&u),"click"===l&&(u=!1!==o.removeSquadron(n.context.$implicit)&&u),u},b.u,b.b)),e.qb(19,49152,null,0,g.f,[e.i,e.l],null,null),e.qb(20,16384,null,0,f.a,[[2,h.l],e.l],null,null),(n()(),e.rb(21,0,null,0,1,"ion-icon",[["name","close"]],null,null,null,b.B,b.i)),e.qb(22,49152,null,0,g.z,[e.i,e.l],{name:[0,"name"]},null),(n()(),e.ib(16777216,null,null,1,null,An)),e.qb(24,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,6,0,l.context.$implicit.faction),n(l,15,0,"hit"),n(l,22,0,"close"),n(l,24,0,l.context.$implicit.pilots)},function(n,l){n(l,0,0,l.component.squadronCss()),n(l,7,0,l.context.$implicit.name,l.context.$implicit.pointsDestroyed,l.context.$implicit.points),n(l,17,0,l.context.$implicit.damagedeck.length)})}function $n(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-fab-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.askReset()&&e),e},b.x,b.f)),e.qb(1,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(2,0,null,0,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(3,114688,null,0,x.a,[],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"reload")},null)}function jn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-fab-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.askUndo()&&e),e},b.x,b.f)),e.qb(1,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(2,0,null,0,1,"ion-icon",[["name","undo"]],null,null,null,b.B,b.i)),e.qb(3,49152,null,0,g.z,[e.i,e.l],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"undo")},null)}function Jn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-fab-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.askRechargeRecurring()&&e),e},b.x,b.f)),e.qb(1,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(2,0,null,0,1,"xwing-icon",[],null,null,null,q.b,q.a)),e.qb(3,114688,null,0,x.a,[],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"charge")},null)}function Rn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,3,"ion-fab-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.xwsAddButton()&&e),e},b.x,b.f)),e.qb(1,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(2,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,b.B,b.i)),e.qb(3,49152,null,0,g.z,[e.i,e.l],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"add")},null)}function Xn(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,19,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,b.z,b.e)),e.qb(1,49152,null,0,g.t,[e.i,e.l],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),e.rb(2,0,null,0,3,"ion-fab-button",[],null,null,null,b.x,b.f)),e.qb(3,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(4,0,null,0,1,"ion-icon",[["name","more"]],null,null,null,b.B,b.i)),e.qb(5,49152,null,0,g.z,[e.i,e.l],{name:[0,"name"]},null),(n()(),e.rb(6,0,null,0,13,"ion-fab-list",[["side","top"]],null,null,null,b.y,b.g)),e.qb(7,49152,null,0,g.v,[e.i,e.l],{side:[0,"side"]},null),(n()(),e.rb(8,0,null,0,3,"ion-fab-button",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.resetData()&&e),e},b.x,b.f)),e.qb(9,49152,null,0,g.u,[e.i,e.l],null,null),(n()(),e.rb(10,0,null,0,1,"ion-icon",[["name","nuclear"]],null,null,null,b.B,b.i)),e.qb(11,49152,null,0,g.z,[e.i,e.l],{name:[0,"name"]},null),(n()(),e.ib(16777216,null,0,1,null,$n)),e.qb(13,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,0,1,null,jn)),e.qb(15,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,0,1,null,Jn)),e.qb(17,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,0,1,null,Rn)),e.qb(19,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0,"end","bottom"),n(l,5,0,"more"),n(l,7,0,"top"),n(l,11,0,"nuclear"),n(l,13,0,t.squadrons.length>0),n(l,15,0,t.snapshots.length>1),n(l,17,0,t.squadrons.length>0),n(l,19,0,t.squadrons.length<2)},null)}function Tn(n){return e.Fb(0,[(n()(),e.ib(16777216,null,null,1,null,Qn)),e.qb(1,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(2,0,null,null,7,"ion-content",[["padding",""]],null,null,null,b.w,b.d)),e.qb(3,49152,null,0,g.r,[e.i,e.l],null,null),(n()(),e.rb(4,0,null,0,3,"div",[["class","squadron-container"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,0,"div",[["class","squadron-header"]],null,null,null,null,null)),(n()(),e.ib(16777216,null,null,1,null,Bn)),e.qb(7,278528,null,0,m.h,[e.Q,e.N,e.u],{ngForOf:[0,"ngForOf"]},null),(n()(),e.ib(16777216,null,0,1,null,Xn)),e.qb(9,16384,null,0,m.i,[e.Q,e.N],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0,!t.dataService.initialized),n(l,7,0,t.squadrons),n(l,9,0,t.dataService.initialized)},null)}var Un=e.nb("app-main",c,function(n){return e.Fb(0,[(n()(),e.rb(0,0,null,null,1,"app-main",[],null,null,null,Tn,Sn)),e.qb(1,114688,null,0,c,[Y.a,o.a,h.l,cn.a,Pn.a,Z.a,Mn.a,e.B,Fn.a,Nn.b,r.a,In.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Gn=t("gIcY"),Wn=t("95zI"),Yn=t("qPnm"),Zn=t("DiPy"),Kn=t("B4/3"),Ln=t("jKa7");t.d(l,"MainPageModuleNgFactory",function(){return Hn});var Hn=e.ob(d,[],function(n){return e.yb([e.zb(512,e.k,e.db,[[8,[p.a,Un]],[3,e.k],e.z]),e.zb(4608,m.k,m.j,[e.w,[2,m.q]]),e.zb(4608,Gn.d,Gn.d,[]),e.zb(4608,Wn.a,Wn.a,[e.B,e.g]),e.zb(4608,Y.a,Y.a,[Wn.a,e.k,e.s]),e.zb(4608,Pn.a,Pn.a,[Wn.a,e.k,e.s]),e.zb(4608,r.a,r.a,[cn.a,Yn.a,Zn.a]),e.zb(1073742336,m.b,m.b,[]),e.zb(1073742336,Gn.c,Gn.c,[]),e.zb(1073742336,Gn.a,Gn.a,[]),e.zb(1073742336,Kn.a,Kn.a,[]),e.zb(1073742336,h.m,h.m,[[2,h.s],[2,h.l]]),e.zb(1073742336,Ln.a,Ln.a,[]),e.zb(1073742336,w,w,[]),e.zb(1073742336,d,d,[]),e.zb(1024,h.j,function(){return[[{path:"",component:c}]]},[])])})}}]);